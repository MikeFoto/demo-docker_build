docker_aux:
  repo:      "ansible_my_repo"
  img_names:
    webserver: "webserver_img"
    loadb:     "loadbalan_img"

docker:
  pull:
    base_images:
      centos68:
        name:    centos
        version: "6.8"
      centos69:
        name:    centos
        version: "6.9"
      centoslatest:
        name:    centos
        version: "latest"
      ubuntults:
        name:    ubuntu
        version: "14.04"
  build:
    build_path:   "../tmp"
    images_to_build:
      - image_name: webserver
        build:      True
        base_image:
          name:     centos
          version:  "6.9"
        name:       "{{ docker_aux.img_names.webserver }}"
        repo:       "{{ docker_aux.repo }}"
        tag:        "v0.08"
        files:
          - name: index1.html
            dst:       /var/www/html/index1.html
            cnt: |
              <h1>
                default index page from ansible (2)
              </h1>
          - name: index.html
            dst:       /var/www/html/index.html
            cnt: |
              <h1>
                default index page from ansible (1)
              </h1>
        script: |
          # httpd
          RUN yum -y  install httpd
          #
          # PHP
          RUN yum -y  install php
          ADD index.html /var/www/html/index.html
          CMD ["/usr/sbin/apachectl", "-DFOREGROUND"]
      - image_name: loadb
        build:      True
        base_image:
          name:     centos
          version:  "latest"
        name:       "{{ docker_aux.img_names.loadb}}"
        repo:       "{{ docker_aux.repo }}"
        tag:        "v0.02"
        script: |
          # line 1 of script ( latest )
          # ....
          # last line of script
  environments:
    env1:
      status:  enable
      containers:
        - {
          name:  "container-env-1-",
          img: "{{ docker_aux.repo }}/{{ docker_aux.img_names.webserver }}:v0.02",
          count: 1,
          ports: "8080:80"     # local:remote
        }
